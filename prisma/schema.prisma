generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  id_user   Int     @id @default(autoincrement())
  username  String  @unique
  firstName String? @db.VarChar(16)
  lastName  String? @db.VarChar(16)
  email     String  @unique @db.VarChar(64)
  password  String  @db.VarChar(128)
  role      role    @default(USER)
  blogPosts blogPost[] @relation("Author")
}

model tokens {
  id_token Int    @id @default(autoincrement())
  id_user  Int
  token    String
}

model blogPost {
  id_blogpost String   @id @unique @default(uuid())
  date        DateTime @default(now())
  lastUpdated DateTime @updatedAt
  title String
  content String
  autohor user @relation("Author", fields: [id_author], references: [id_user], onDelete: Cascade)
  id_author Int
  categories category[]
}

model category {
  id   Int    @id @default(autoincrement())
  name String
  posts blogPost[]
}

model blogPostTocategory {
  A String
  B Int

  @@unique([A, B], map: "_blogPostTocategory_AB_unique")
  @@index([B], map: "_blogPostTocategory_B_index")
  @@map("_blogPostTocategory")
}

enum role {
  USER
  ADMIN
}
